<%- include('../partials/header') %>

  <div class="container">
    <div class="form-card">
      <h1>Delete Category: <%= category.name %></h1>

      <% if (items && items.length > 0) { %>
        <div class="alert alert-error">
          <p><strong>Warning:</strong> This category contains <%= items.length %> item(s).</p>
          <p>You cannot delete a category that has items. Please delete or reassign all items first.</p>
        </div>
        <div class="form-actions">
          <a href="/categories/<%= category.slug %>" class="btn btn-secondary">Cancel</a>
        </div>
      <% } else { %>
        <div class="alert alert-error">
          <p><strong>Are you sure you want to delete this category?</strong></p>
          <p>This action cannot be undone.</p>
        </div>

        <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
          <div class="alert alert-error">
            <ul>
              <% errors.forEach(error => { %>
                <li><%= error %></li>
              <% }); %>
            </ul>
          </div>
        <% } %>

        <form method="POST" action="/categories/<%= category.slug %>?_method=DELETE" class="delete-form">
          <div class="form-group">
            <label for="adminPassword">Admin Password *</label>
            <input
              type="password"
              id="adminPassword"
              name="adminPassword"
              required
              class="form-control"
              placeholder="Enter admin password to confirm deletion"
              autofocus
            >
            <small class="form-help">Required for deleting categories</small>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-danger">Delete Category</button>
            <a href="/categories/<%= category.slug %>" class="btn btn-secondary">Cancel</a>
          </div>
        </form>
      <% } %>
    </div>
  </div>

<%- include('../partials/footer') %>

